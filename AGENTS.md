# AGENTS ガイドライン（リポジトリ全体）

このドキュメントは、コーディングアシスタントAIがDreamWeaveの開発を支援する際の基本方針を示します。リポジトリ内のすべてのファイルに適用されます。より詳細な指針が必要になった場合は、サブディレクトリごとに別途AGENTS.mdを追加してください。

## 一般方針
- **要件準拠**: 実装前に`RDD.md`を確認し、対象スコープがMVP/拡張のどちらかを明確にしてください。
- **ドキュメント優先**: 新機能を実装する際はREADMEやPLANSを最新化し、利用方法や依存関係を明記します。
- **コミット粒度**: 機能単位で小さなコミットを作成し、テスト結果を含めたPRを用意してください。
- **テスト文化**: バックエンドは`pytest`、モバイルは`flutter test`を基本とし、主要機能には自動テストを追加します。

## コーディングスタイル
- **Python (FastAPI)**: `ruff`と`mypy`を利用し、型ヒントを必須とします。例外処理に裸の`except`を使用しないでください。
- **Dart (Flutter)**: `dart format`を使用し、`lint`パッケージに準拠した命名・構造に従います。
- **共通**: 変更箇所にはdocstring・コメントを適度に記載し、ビジネスロジックとUIロジックを分離します。

## テストと検証
- 変更内容に対して自動テストを用意できない場合は、その理由をPRに明記してください。
- 外部APIを利用するテストはモックを活用し、シークレットをリポジトリに含めないよう注意します。

## PRメッセージテンプレート
PRを作成する際は、以下の構成を推奨します。

1. **概要**: 変更点を箇条書きで記載
2. **動作確認**: 実行したコマンドと結果
3. **関連Issue**: 対応するIssue番号
4. **備考**: リスクやフォローアップタスクがあれば記載

## サポートワークフロー
- タスクを着手する際は`PLANS.md`に反映し、作業状況を`Todo / In Progress / Done`で管理してください。
- 改善提案や未解決事項は`IMPROVEMENTS.md`へ追記して、優先度を議論できる状態に保ちます。
